"use strict";var _createClass=function(){function e(t,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var o=0,r=Array(t.length);o<t.length;o++)r[o]=t[o];return r}return Array.from(t)}function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}define(["jquery","top","shopdata","jquerylazyload"],function(l,o,r){return{init:function(){function t(){_classCallCheck(this,t),this.suspend=l(".suswrap"),this.floorNav=l(".floor-nav"),this.floorEle=this.floorNav.find("li"),this.floorTar=null,this.tianmaoEle=l(".tianmaoplate"),this.shopindex=null,this.shopData=r.shopinit,this.shopbox=l(".centerlist-bottom-main"),this.shopLi=l(".center-nav").find("li"),this.shopDetail=l(".center-bottom-detail"),this.shopDetailUL=l(".detail-left").find("ul"),this.shopDetailRight=l(".detail-right"),this.shopCenterBack=l(".centerlist-bottom"),this.scrollIndex=0,this.scrollBn=l(".scroll-bn"),this.scrollImg=["https://img.alicdn.com/simba/img/TB1lUcQfqNj0u4jSZFySutgMVXa.jpg","https://img.alicdn.com/simba/img/TB1MsNub7cx_u4jSZFlSutnUFXa.jpg","https://aecpm.alicdn.com/simba/img/TB1_JXrLVXXXXbZXVXXSutbFXXX.jpg","https://aecpm.alicdn.com/simba/img/TB1W4nPJFXXXXbSXpXXSutbFXXX.jpg","https://aecpm.alicdn.com/tfscom/TB1aL.7NoT1gK0jSZFrXXcNCXXa.jpg"],this.renderShopAjax(),this.initFn()}new(_createClass(t,[{key:"initFn",value:function(){var o=this;l(window).on("scroll",function(t){return o.winScrollHandler(t)}),this.floorEle.on("click mouseover",function(t){return o.floorHandler(t)}),this.floorNav.find("ul").on("mouseout",function(t){return o.floorHandler1(t)}),this.floorNav.find("p").on("click",function(t){return o.floorHandler(t)}),this.shopLi.on("mouseover mouseout click",function(t){return o.shopLiHandler(t)}),this.tabBackground()}},{key:"winScrollHandler",value:function(){var r=this;750<=l(window).scrollTop()?this.suspend.stop(!0).animate({top:0}):this.suspend.stop(!0).animate({top:-50}),500<=l(window).scrollTop()?(this.floorNav.css({display:"block"}),this.tianmaoEle.each(function(t,o){if(l(window).scrollTop()>parseInt(l(o).offset().top-500))return r.floorEle.eq(t).css("backgroundColor","royalblue").siblings("li").css("backgroundColor","gray"),void(r.floorTar=r.floorEle[t])})):(this.floorNav.css({display:"none"}),this.floorEle.css("backgroundColor","gray"))}},{key:"floorHandler",value:function(t){"click"===t.type?"LI"===t.target.nodeName?l("html").stop(!0).animate({scrollTop:this.tianmaoEle.eq(l(t.target).index()).offset().top-parseInt(this.suspend.css("height"))}):l("html").stop(!0).animate({scrollTop:0}):(t.type="mouseover",t.target!==this.floorTar&&this.floorEle.eq(l(t.target).index()).css("backgroundColor","orange").siblings("li").not(this.floorTar).css("backgroundColor","gray"))}},{key:"floorHandler1",value:function(){this.floorEle.not(this.floorTar).css("backgroundColor","gray")}},{key:"shopLiHandler",value:function(t){var o=this;"mouseover"===t.type?(this.shopindex=l(t.target).index(),this.shopLiEffect("white",this.randomColor(),"bold"),this.shopbox.css("zIndex",1),this.shopDetail.show(),this.shopDetailRight.empty(),this.shopDetailUL.empty(),this.shopDetailRender(),this.shopDetail.on("mouseover mouseout",function(t){return o.shopDetailHandler(t)})):"mouseout"===t.type?(this.shopLiEffect("transparent","#fff","normal"),this.shopDetail.hide(),this.shopbox.css("zIndex",0)):"click"===t.type&&(location.href="./shoplist.html")}},{key:"shopDetailHandler",value:function(t){"mouseover"===t.type?(this.shopDetail.show(),this.shopbox.css("zIndex",1),this.shopLiEffect("white",this.randomColor(),"bold")):(this.shopbox.css("zIndex",0),this.shopDetail.hide(),this.shopLiEffect("transparent","#fff","normal"))}},{key:"shopLiEffect",value:function(t,o,r){this.shopLi.eq(this.shopindex).css({backgroundColor:t,color:o,fontWeight:r})}},{key:"shopDetailRender",value:function(){var a=this,t=this.shopData[this.shopindex].text,o=this.shopData[this.shopindex].imgsrc;0!==o.length&&o.forEach(function(t){var o=l("<img></img>");o.attr("src",t),a.shopDetailRight.append(o)}),t.forEach(function(t,o){var r=l("<li></li>"),e=l("<div></div>"),i=l("<div></div>"),n=l("<b></b>"),s=l("<span></span>");e.addClass("li-left"),i.addClass("li-right"),s.html("&gt"),n.html(t[0]),n.appendTo(e),s.appendTo(e),t.slice(1).forEach(function(t,o){var r=l("<a></a>"),e=.5<Math.random()?"orange":"black";r.attr("href","./shoplist.html"),r.html(t),r.css("color",e),r.appendTo(i)}),e.appendTo(r),i.appendTo(r),r.appendTo(a.shopDetailUL)})}},{key:"randomColor",value:function(){for(var t="#",o=0;o<6;o++)t+=Math.floor(16*Math.random()).toString(16);return t}},{key:"tabBackground",value:function(){var o=this;this.shopCenterBack.css("background","#e8e8e8 url("+this.scrollImg[this.scrollIndex]+")  center no-repeat");for(var t=this.scrollImg.length,r=0;r<t;r++){var e=l("<span></span>");e.appendTo(this.scrollBn),e.on("mouseover",function(t){clearInterval(o.scrollTimer),o.scrollIndex=l(t.target).index(),o.spanOverTimer=setTimeout(function(){o.shopCenterBack.css({background:"#e8e8e8 url("+o.scrollImg[o.scrollIndex]+")  center no-repeat",transition:"all 0.5s"}),l(t.target).css("background","#fff").siblings("span").css("background","#000")},600)}),e.on("mouseout",function(t){clearInterval(o.spanOverTimer)})}this.scrollBn.css("width",this.scrollBn.find("span").first()[0].offsetWidth*t+5*(t-1)),this.scrollSettimeEffect(),this.shopbox.on("mouseover mouseout",function(t){return o.scrollSettime(t)})}},{key:"scrollSettime",value:function(t){"mouseout"===t.type?this.scrollSettimeEffect():"mouseover"===t.type&&clearInterval(this.scrollTimer)}},{key:"scrollSettimeEffect",value:function(){var o=this;this.scrollTimer=setInterval(function(){o.scrollIndex===o.scrollImg.length-1?o.scrollIndex=0:o.scrollIndex++;var t=o.scrollBn.find("span").eq(o.scrollIndex);o.shopCenterBack.css({background:"#e8e8e8 url("+o.scrollImg[o.scrollIndex]+")  center no-repeat",transition:"all 0.5s"}),t.css("background","#fff").siblings("span").css("background","#000")},2e3)}},{key:"renderShopAjax",value:function(){var r=this;l.ajax({url:"http://localhost/tianmao/dist/php/getlistdata.php"}).done(function(t){var o=JSON.parse(t);r.renderShopInfor(o)})}},{key:"renderShopInfor",value:function(t){var r=this;this.tianmaochaoshiArr=t.filter(function(t){return"天猫超市"===t.type}),this.tiammaoguojiArr=t.filter(function(t){return"天猫国际"===t.type}),this.jujiashenghuoArr=t.filter(function(t){return"居家生活"===t.type}),this.chaodiankuwanArr=t.filter(function(t){return"潮店酷玩"===t.type}),this.meilirenshengArr=t.filter(function(t){return"美丽人生"===t.type}),this.dazaoaichaoArr=t.filter(function(t){return"打造爱巢"===t.type}),this.huwaichuxingArr=t.filter(function(t){return"户外出行"===t.type}),this.cainixihuanArr=t.filter(function(t){return"猜你喜欢"===t.type});for(var o,e,i,n,s,a,l,h,c=0;c<3;c++){(o=this.tianmaochaoshiArr).push.apply(o,_toConsumableArray(t.filter(function(t){return"天猫超市"===t.type}))),(e=this.tiammaoguojiArr).push.apply(e,_toConsumableArray(t.filter(function(t){return"天猫国际"===t.type}))),(i=this.jujiashenghuoArr).push.apply(i,_toConsumableArray(t.filter(function(t){return"居家生活"===t.type}))),(n=this.chaodiankuwanArr).push.apply(n,_toConsumableArray(t.filter(function(t){return"潮店酷玩"===t.type}))),(s=this.meilirenshengArr).push.apply(s,_toConsumableArray(t.filter(function(t){return"美丽人生"===t.type}))),(a=this.dazaoaichaoArr).push.apply(a,_toConsumableArray(t.filter(function(t){return"打造爱巢"===t.type}))),(l=this.huwaichuxingArr).push.apply(l,_toConsumableArray(t.filter(function(t){return"户外出行"===t.type}))),(h=this.cainixihuanArr).push.apply(h,_toConsumableArray(t.filter(function(t){return"猜你喜欢"===t.type})))}this.tianmaoEle.each(function(t,o){r.renderShopPublic(o,"tianmaochaoshi",r.tianmaochaoshiArr),r.renderShopPublic(o,"tiammaoguoji",r.tiammaoguojiArr),r.renderShopPublic(o,"jujiasehnghuo",r.jujiashenghuoArr),r.renderShopPublic(o,"chaodiankuwan",r.chaodiankuwanArr),r.renderShopPublic(o,"meilirensheng",r.meilirenshengArr),r.renderShopPublic(o,"dazaoaichao",r.dazaoaichaoArr),r.renderShopPublic(o,"huwaichuxing",r.huwaichuxingArr),r.renderShopPublic(o,"cainixihuan",r.cainixihuanArr.slice(0,-2))})}},{key:"renderShopPublic",value:function(t,o,r){var e;t.className.includes(o)&&(e="",r.forEach(function(t){e+="<a href='shoplist.html'>\n                                <li>\n                                    <img class='lazy' data-original="+t.pic+">\n                                    <div>"+t.title+"</div>\n                                    <p><b>￥</b><span>"+t.price+"</span></p>\n                                </li>\n                            </a>"}),l(t).find(".right ul").html(e)),l(function(){l("img.lazy").lazyload({effect:"fadeIn"})})}}]),t),o.topinit()}}});